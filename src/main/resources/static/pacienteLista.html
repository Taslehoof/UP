<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Sonrisa Feliz - Tu Clinica Odontologica</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
<div id="includednavBar"></div>
<div class="container">
    <div id="div_paciente_table">
        <div class="d-flex justify-content-between align-items-center mb-3 mt-4">
            <h1 class="h4 mb-0">Lista de Pacientes</h1>
            <button type="button" class="btn btn-primary btn-mb-3" id="btnAgregarPaciente" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                Agregar paciente
            </button>
        </div>
        <div>
            <input class="form-control" id="buscarTabla" type="text" placeholder="Buscar...">
        </div>
        <div class="row col-md-auto table-responsive">
            <table id="pacienteTable" class="table table-striped">
                <thead>
                <tr>
                    <th>Id</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Numero de Contacto</th>
                    <th>Fecha de Ingreso</th>
                    <th>email</th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
                </thead>
                <tbody id="pacienteTableBody">


                </tbody>
            </table>
        </div>
    </div>
    <hr>
</div>
<!-- Modal Añadir Paciente -->
<div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="exampleModalLabel">Agregar Paciente</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form class="row g-3" id="agregar_paciente_form">
                    <div class="col-md-6">
                        <label for="add_nombre" class="form-label">Nombre:</label>
                        <input type="text" class="form-control" placeholder="Juan" aria-label="Nombre" id="add_nombre">
                    </div>
                    <div class="col-md-6">
                        <label for="add_apellido" class="form-label">Apellido:</label>
                        <input type="text" class="form-control" placeholder="Perez" aria-label="Apellido" id="add_apellido">
                    </div>
                    <div class="col-md-6">
                        <label for="add_numContacto" class="form-label">Número de Contacto:</label>
                        <input type="text" class="form-control" placeholder="011 1234-5678" aria-label="Número de Contacto" id="add_numContacto">
                    </div>
                    <div class="col-md-6">
                        <label for="add_email" class="form-label">Correo electrónico:</label>
                        <input type="text" class="form-control" placeholder="" aria-label="Correo electrónico" id="add_email">
                    </div>
                    <div class="form-group">
                        <h2 class="h4 mb-1 mt-3">Domicilio</h2>
                    </div>
                    <div class="col-md-9">
                        <label for="add_domi_calle" class="form-label">Dirección:</label>
                        <input type="text" class="form-control" placeholder="Siempre Viva" aria-label="dirección" id="add_domi_calle">
                    </div>
                    <div class="col-md-3">
                        <label for="add_domi_numero" class="form-label" >Altura:</label>
                        <input type="text" class="form-control" placeholder="1111" aria-label="altura" id="add_domi_numero">
                    </div>
                    <div class="col-md-6">
                        <label for="add_domi_localidad" class="form-label">Localidad:</label>
                        <input type="text" class="form-control" placeholder="Springfield" aria-label="Localidad" id="add_domi_localidad">
                    </div>
                    <div class="col-md-6">
                        <label for="add_domi_provincia" class="form-label">Provincia:</label>
                        <input type="text" class="form-control" placeholder="Mississippi" aria-label="Provincia" id="add_domi_provincia">
                    </div>


                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-primary">Añadir Paciente</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Añadir Paciente -->

<!-- Modal Ver / Modificar Paciente -->
<div class="modal fade" id="verPaciente" data-bs-backdrop="static" tabindex="-1" aria-labelledby="verPacienteLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" id="verPacienteLabel">Información del Paciente</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>

            <div class="modal-body">
                <form class="row g-3" id="ver_paciente_form">
                    <div class="col-md-4">
                        <label for="ver_paciente_id" class="form-label">Id Paciente</label>
                        <input type="text" class="form-control" id="ver_paciente_id" readonly>
                    </div>
                    <div class="col-md-4">
                        <label for="ver_fechaIngreso" class="form-label">Fecha de Ingreso</label>
                        <input type="text" class="form-control" id="ver_fechaIngreso" readonly>
                    </div>
                    <div class="col-md-4">
                        <label for="ver_domi_id" class="form-label">Id Domicilio</label>
                        <input type="text" class="form-control" id="ver_domi_id" readonly>
                    </div>

                    <div class="col-md-6">
                        <label for="ver_nombre" class="form-label">Nombre</label>
                        <input type="text" class="form-control" id="ver_nombre" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="ver_apellido" class="form-label">Apellido</label>
                        <input type="text" class="form-control" id="ver_apellido" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="ver_numContacto" class="form-label">Número de Contacto</label>
                        <input type="text" class="form-control" id="ver_numContacto" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="ver_email" class="form-label">Correo electrónico</label>
                        <input type="text" class="form-control" id="ver_email" readonly>
                    </div>

                    <div class="col-12">
                        <h2 class="h5 mb-1 mt-2">Domicilio</h2>
                    </div>
                    <div class="col-md-9">
                        <label for="ver_domi_calle" class="form-label">Dirección</label>
                        <input type="text" class="form-control" id="ver_domi_calle" readonly>
                    </div>
                    <div class="col-md-3">
                        <label for="ver_domi_numero" class="form-label">Altura</label>
                        <input type="text" class="form-control" id="ver_domi_numero" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="ver_domi_localidad" class="form-label">Localidad</label>
                        <input type="text" class="form-control" id="ver_domi_localidad" readonly>
                    </div>
                    <div class="col-md-6">
                        <label for="ver_domi_provincia" class="form-label">Provincia</label>
                        <input type="text" class="form-control" id="ver_domi_provincia" readonly>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-danger" id="btnToggleEdit">Modificar</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Ver / Modificar Paciente -->

<!-- Modal Turnos Paciente -->
<div class="modal fade" id="turnosModal" data-bs-backdrop="static" tabindex="-1" aria-labelledby="turnosPacienteLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-5" >Turnos del Paciente</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>

            <div class="modal-body">
                <form class="row g-3" id="turnosPaciente_form">

                    <div class="col-md-12">
                        <h3 id="turnosPacienteNombre"></h3>
                    </div>
                    <div id="turnosProximos" class="mt-3">
                        <h5>Turnos próximos:</h5>
                    </div>
                    <div id="turnosPrevios" class="mt-3">
                        <h5>Turnos previos:</h5>
                    </div>

                    <div class="col-md-12">
                        <h5>Reserve un nuevo Turno</h5>
                    </div>
                    <div class="col-md-6">
                        <input type="text" id="datepicker" placeholder="Seleccione una fecha">
                    </div>
                    <div class="col-md-6">
                        <select id="selectOdontologo" class="form-select" aria-label="Odontólogos">
                            <option selected>Seleccioná un Odontólogo</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                <button type="button" class="btn btn-success" id="btnToggleTurnos">Agendar turno</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal Turnos Paciente -->

<!-- Modal: Confirmar borrado -->
<div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h1 class="modal-title fs-6">Confirmar borrado</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
            </div>
            <div class="modal-body">
                ¿Seguro que querés eliminar al paciente
                <strong id="confirmPacienteNombre"></strong>
                (<span id="confirmPacienteId"></span>)?
                <br>Esta acción no se puede deshacer.
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-danger" id="btnConfirmDelete">Eliminar</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal: Confirmar borrado -->
<script type="text/javascript" src="/js/get_Paciente.js"></script>
<script type="text/javascript" src="/js/add_Paciente.js"></script>
<script type="text/javascript" src="/js/delete_Paciente.js"></script>
<script type="text/javascript" src="/js/update_Paciente.js"></script>
<script type="text/javascript" src="/js/turnos_Paciente.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://npmcdn.com/flatpickr/dist/l10n/es.js"></script>
<script>
    $(function(){
        $("#includednavBar").load("fragments/navbar.html");
    });
    $(document).ready(function(){
        $("#buscarTabla").on("keyup", function() {
            var value = $(this).val().toLowerCase();
            $("#pacienteTableBody tr").filter(function() {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
    // Initialize Flatpickr
    flatpickr("#datepicker", {
        locale: "es",
        dateFormat: "Y-m-d", // Format: Year-Month-Day
        minDate: "today", // Disable past dates
        //maxDate: "2023-12-31" // Example max date
        altInput: true,
    });
</script>
</body>
</html>